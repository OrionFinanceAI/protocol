import * as dotenv from "dotenv";
import { ethers } from "hardhat";

dotenv.config();

function getUniverseList(): string[] {
  return [
    "0x44B6A414e73fb7387Ca250F44D7e43cD7d6992c2",
    "0x6d6947aeD08C3407bDFF56cfA509Eda98Df2E996",
    "0x8448758c3Cad93675eACe770847aA9507f8bDe0B",
    "0x858B326659D543CdF80199b95E9338fDc8C7B953",
    "0xd4D620B23E91031fa08045b6083878f42558d6b9",
    "0xBEEF8e0982874e0292E6C5751C5A4092b3e1BEEF",
    "0xAf5bF2D152e6a16095588D3438B55eDc2bB28343",
    "0x1817CFfc44c78d5aED61420bF48Cc273E504B7BE",
    "0x3E1c2C604f60ef142AADAA51aa864f8438f2aaC1",
    "0xD6F5BEF9b63bf648EeA43b80B480BE653138D116",
    "0x4Dc0f0e627F56B72616604A6A57e4B6E020377a3",
    "0x6282FCa35943faBE45d6056F3751b3cf2Bf4504E",
    "0x1153211f7E810C73cC45eE09FF9A0742fBB6b467",
    "0xE11BcC9de5462ce624694c2DfC55a5e1b24e345F",
    "0xa6b53563a13de4C443FC4fd60d7127Ad54924cd3",
    "0x56d50Ca676f9AdC1E90f29F25e0d12DeC02746eE",
    "0x93b0Fa253980Bb5cce6c1B6ecd32185E27f4FE1C",
    "0x26F44884D9744C0EDaB6283930DF325c200020A3",
    "0xc8C1351C63D70f6A4dc13C66631764fa1Db0Ac9D",
    "0x92A14518434a46E88CB4C3918AD33B3344099E02",
    "0xdB41502E5341CDBa0658AcC4033e4480385A5D49",
    "0x4115150523599D1F6C6Fa27F5A4C27D578Fd8ce5",
    "0xc2f9C3F4e4cdE519D5DeA9880C1CA6614E4b3d61",
    "0x64b3bc10e834905364178D6e23B296A5395EE111",
    "0xcC3E3B9D045666AD90718A3Db28256de2C152297",
    "0x5dA90BA82bED0AB701E6762D2bF44E08634d9776",
    "0x0E5F3a47122901D3eE047d2C7e1B36b419Ede5FE",
    "0x46EA5993fdDC27E4f770eFfB6921F401101Cbd59",
    "0x68Ad3F6da23ad1cD24CB5089492ccF186bfBBe7b",
    "0xe50e2fe90745A8510491F89113959a1EF01AD400",
    "0xbbAD3dE35c76524F55DBf1cAFE782D6a69E0c3E6",
    "0x562Ea6FfFD1293b9433E7b81A2682C31892ea013",
    "0x83BE6565c0758f746c09f95559B45Cfb9a0FFFc4",
    "0xc2CA275bC2BB07fC8167E43aB11402FA1ac54c54",
    "0x967f88e651db83B1A74058D7499263eA7b3066E2",
    "0xb546807794dEdfd196a5d230856190d78cF31d04",
    "0x06c1e90eeb34e7Fa6d78B8E58348Ae15C1a615E4",
    "0x4d7222Eee3c6b67F8e806D0f866B0D666D6182b3",
    "0xBF7fc2A3d96d80f47b3b89BE84afe10376CE96A5",
    "0xC1b5D2E9535DDFC56859fFC04Cd9E1563970aE74",
    "0x37925b6319cD41014583A6476a7a1d52Ea404b2f",
    "0x4fc424a840B5fB1BAf195963eC3737904440df1D",
    "0xD7475b5941536ea4236e923997107BAaDa1Fb5E7",
    "0x3bDaCAF62f6653808ABCaffB1D5f2be82E52DE19",
    "0x61F96CA5c79c9753C93244c73f1d4b4a90c1aC8c",
    "0xdE5a3596750e22891352c62f68C86D4cF30256e9",
    "0x17dEc2AF8018f2F940D34787399eA123Ff292963",
    "0xD81eaAE8E6195e67695bE9aC447c9D6214CB717A",
    "0xa7739fd3d12ac7F16D8329AF3Ee407e19De10D8D",
    "0x0d2846d81099CE35cFB3CF5A81394E7d2f078f37",
    "0xbcebd16B29A16B9Bff138b68b3f31515b33D1637",
    "0xb0018cfD5739912318Cc27d7a68a233F826DCE0b",
    "0xAB28C317B34084f29d7623208b5F09C0Dd566a18",
    "0x40868f6C0345426DC1423348dDd937FFEF1243c1",
    "0x584830bCBEFF098b922Af3eA8A78Fcc62e0dbB4e",
    "0x190951D3951F08Dd9DFe8557E146f09c3f90102E",
    "0xAE0bFfc3110e69DA8993F11C1CBd9a6eA3d16daF",
    "0x26343d0cD02a52548b361bf79961AB7341965E52",
    "0xc651F2e75101b247bdA18414Fcc23d00cd2c31e2",
    "0xBbAeb1aA33ca67c4875631a282e7925dF6b474c2",
    "0x5Fd8c79C2A56d3A070ADA4e3767C807956aC534b",
    "0x0D10346Cb5Efc58A9ccF5C3cecF9273596Faf0D6",
    "0xaa43DFb8fC642Feb9887cDFFff1DAAd1cFA511B4",
    "0xbacaDaFD16bc062aE0c9818722F04B868d7d5392",
    "0x9f8e3E829DbF75dc035d79502bae87d412c2bC36",
    "0xBcaeC95a49D50F7336fC08017343Ddd8ED239A52",
    "0x7E0977F71d62E2d993e2dC68E086A7752FF0652d",
    "0x4D75a9342113c106F48117d81e2952A5828d1B5F",
    "0xD1BeaD7CadcCC6b6a715A6272c39F1EC54F6EC99",
    "0x7628f57cAA83fa54909a5E46e55F0406dEcE56E6",
    "0x8cFE2f46052efE1a0784b0a28C802474C1dfd9D0",
    "0xFA72D4083388D2c82A72b073ED4a0954C4079Dc3",
    "0xA5d42aAfCDC85c7D41710c58985664351Ef85aE6",
    "0xf308d61839716610baf43cb72c294C61BB67e38E",
    "0x7D02B28e5632fc027B9FCC27701e2A8965683f95",
    "0x7A7978523DA75b469F4D745714FE55eCe6a4D5a9",
    "0x9E59eb2059B44a0234b8454567482AE516926E8D",
    "0x66F5263d51174bab17Ac2bda31E51F5bcF05a69A",
    "0x1bc48214A6e672FEA1eB115D9DC81B470E5F1173",
    "0xe17D6212eAa54D98187026A770dee96f7C264feC",
    "0x0258B57559e4EC229e3a710D2a55447eaea2312D",
    "0x245186CaA063b13d0025891c0d513aCf552fB38E",
    "0x6853691Ca8Da03Da16194E468068bE5A80F103b0",
    "0x112a9fCB37cEcbc0682CF76bb00B58651C9C2400",
    "0xC5cc5a221204c2B2c9d1c2bca78fc7815E371137",
    "0xE010B164E54735Bb6401c426E9b4Dc16949c00B8",
    "0x9d438daD90f928B00576D202693608bf0ecdbf0F",
    "0x4F67Cd07A161663B5f4cAf7c32A12B23124e4b30",
    "0x35C3ecA69a0D9A631eE613Fe044653B72E6c4408",
    "0xF1eEc85f30fb1a4F4f53CF14090df1F619CA6474",
    "0x5Bcd31a28D77a1A5Ef5e0146Ab91e6f43D7100b7",
    "0x0c0b12343885427A80b3d9d2c552e178Cb216d69",
    "0x3fe43D4ba0a5BAcC800c7E7E782466a27ab108bf",
    "0xe36cDbd69adF2F74C8ab987a1CfD448Ae91fa153",
    "0xfe494Acd28dfC989A4B6853eF8D1495a1d43F2E0",
    "0xa95a7C9413B562f8D0581b91eC9d51A4FB5baB7e",
    "0x1632c328748994aa5616aa8379e8FcbBabDC0F0A",
    "0x5ad11ef89Cbe3D27F8876F06CDC26c50b633e561",
    "0xF62847E9A9dD2e7c0480B25AB99E71b7C1da6CED",
    "0x03eF3bDfb303a594b7729f3701919c582cEf0bbC",
    "0x81F040E82aae01f3921A1c1225C86ce5C57C218b",
    "0xCc19786F91BB1F3F3Fd9A2eA9fD9a54F7743039E",
    "0x15780E0e9618c26dA679740C43bEc76830Ff187b",
    "0xd5bAd7c89028B3F7094e40DcCe83D4e6b3Fd9AA4",
    "0xE8e71d6552972e9BA2D4800C9EDA40c41d1bE34F",
    "0x93027914546190635C51647FC9270f0025dA8C53",
    "0x7031c053dd8BB6d01474846CF4F1eFEeBC3beC56",
    "0x897Df983C03e0cF3095469c08Af53d7F3C790E7b",
    "0xFc6a9D39b44a174B5Ba708dBaa437632d78B8585",
    "0x47fbBc12e74825bFE8475c4b8BcC57d880C99025",
    "0xE0d5f9DA3613C047003b77cAa31270aBE3EdA6b0",
    "0x5679Ec6393Affe923760270a95ED1627fC4F035a",
    "0x1ae9de00696488A88192C942dB5711e4185f035f",
    "0x3334D380CA00FC9388E21B259673bB3d2BcD2D95",
    "0xf445C69765AB4901Ebf2a3afE537B7eCca5e612E",
    "0xdbDC68f6322BFf82e2f5d7AE720cc368a582e468",
    "0x6860A2fB5040930b9222a871C755b86a779b0cC1",
    "0x03D0F88aDc096259b49079073aED693Ba5f425EE",
    "0xbDfC7bd237453D330fF9c8d2cBc6c4384a1d19D6",
    "0xFbdA1e15e4619001bA633f6b191646cE1D4D825C",
    "0x31C0dac4c896cb84adFEF2F8e41cb9295EEc93c2",
    "0xb9548238d875fB4e12727B2750D8a0bDbc7171c7",
    "0x127ee8a1D37cDFa3922aa75C959189682c18c6be",
    "0x34892e2AcAb7Db584DE000fAa1Ca142040176b26",
    "0x61cf8d861ff3c939147c2aa1F694f9592Bf51983",
    "0xf12DD69a5ab0cfbf41758052D871B881DC0fC8e0",
    "0xeAa61217fbbaB972fEBFAEa8D62105139D0240E8",
    "0xadBE02F718327628ED9A9515EC27D3d3b4950ED2",
    "0x4742c355711a2790b17CC0Fe48035a1AF9C22432",
    "0x1d46d2B6A3d83bB33Feb7b8e7EdFb73e9937befD",
    "0x94AcD52eDDe27357dab8FaBdF9DB4bbd54F1E85E",
    "0xa11654Bb4286d0ffCc1f76AacbEf7125ad972BA8",
    "0xB045a2ed3C471EA3DB62Bd028ebC85B2661fbfe7",
    "0x9E90aD4810C9eaE0ADFc15801838Dc53cC6ed48a",
    "0x4968f6f54B3dD4aaA851D0300d45624b6251391D",
    "0x3Dc441e6139e4aF547F48bA672bD9800E6F30b7c",
    "0x383F9B2d080C58301D821e9F0EC5a35A17070bE6",
    "0x234Fd76985dA4fD505DbAF7A48e119Cd5dFD5C8F",
    "0x576D38f58cfcd6499e815095E589537088028cFB",
    "0xe6aB93d1c253d16733d52dD40b4929a6a04b2B08",
    "0xA07eaD9FE97D674f9F60c1eB02352f55f4c611C8",
    "0x7eAeA98668f1C062266B4C186F57eAfb6dF6Fbe4",
    "0xbBA4D1CEcc111BDC74bD2f95050Fb11aCB3b8A5E",
    "0x1B5308C4485E63472226C0C985dFD1deEE1b47D3",
    "0xBE2bD093B8F342e060E79Fad6059B1057F016Ba4",
    "0xF6Ea343CF20dC9D5bfC70Ea31d7e7420d0510417",
    "0x9AbD7F0782CDe1DBd1F0519C35c961b6A724c2a5",
    "0x63a936Cc9740126f21eC8144aCfF22C2Ff89149c",
    "0xD2589aD0381EDAaE822d39f82b920D5CCD21a836",
    "0xC6147915Dd5b9cb799A7262933950878aA1a0b6B",
    "0x4dd0cF20237deb5F2bE76340838B9e2D7c70E852",
    "0x8affC4591DE6eAEc6836c243b00b80F4339f99f5",
    "0x8D719AD5Cc19d5413A9D11Bd39813847f352De65",
    "0x12eE065896cc5b24fa81fA4a10F935a445bf744f",
    "0x7f3F33B42b9734e61cb44424D130B5f6e09C9Db3",
    "0x3f5e39bf80798cB94846B48f1c635001a2E43066",
    "0x8C645aE763a2341a336629B1E6165c9aD28d90f2",
    "0xb937C98497661873855C7f8E3C9c5772967715e8",
    "0xB2975e68b3FAc3b8ff444660cc4cee907367EB0C",
    "0x10841DC10aE8C38549f09D529e86F44F6FF0AcB7",
    "0x136cfAB58238837a5A6789686dE4E821f39A436f",
    "0x0c01c637a6Fbe99eFa81898DC2196C36bc6A22dA",
    "0x7Af50A047AC5c37EECf38025FaD92A81aA02AC9B",
    "0xe6A0A44FB3096d758018E6DFB10b7a93bfCcA279",
    "0x16F06dE7F077A95684DBAeEdD15A5808c3E13cD0",
    "0x947D4dA9b496F1cB3Fe99B7A6c0795D494e017ea",
    "0x1208bE3dc8DD350A81C1EaC32ae9B08DCdB885D8",
    "0x5B14b69eDc64A0fa36F822AbC7a9E96ADc05eCb9",
    "0x17CEb96f71Ed655fed4b06eC5492d89865c14Fd4",
    "0xAd61e331F42b4dB3dd4e9373CCe33C39f95f57D9",
    "0x785e763EDaB63dB2D0e9eA645A33C0CD629EFE3E",
    "0xd2453B2e43e2963A07F136CD469B8F5811158153",
    "0x949456A7ACcb996d92a63169b1307C89b5D67B9c"
  ];
}

async function main() {
  const [deployer] = await ethers.getSigners();
  console.log("Using deployer:", await deployer.getAddress());

  const {
    CONFIG_ADDRESS,
    UNDERLYING_ASSET,
    INTERNAL_ORCHESTRATOR_ADDRESS,
    LIQUIDITY_ORCHESTRATOR_ADDRESS,
    ORACLE_ADDRESS,
    FHE_PUBLIC_CID,
    FACTORY_ADDRESS,
  } = process.env;

  if (
    !CONFIG_ADDRESS ||
    !UNDERLYING_ASSET ||
    !INTERNAL_ORCHESTRATOR_ADDRESS ||
    !LIQUIDITY_ORCHESTRATOR_ADDRESS ||
    !ORACLE_ADDRESS ||
    !FHE_PUBLIC_CID ||
    !FACTORY_ADDRESS
  ) {
    throw new Error("Missing one or more required env variables");
  }

  const config = await ethers.getContractAt("OrionConfig", CONFIG_ADDRESS);

  console.log("ğŸ“¦ Setting protocol parameters...");
  const setTx = await config.setProtocolParams(
    UNDERLYING_ASSET,
    INTERNAL_ORCHESTRATOR_ADDRESS,
    LIQUIDITY_ORCHESTRATOR_ADDRESS,
    ORACLE_ADDRESS,
    9, // Biggest integer that can be represented in 32 bits
    FHE_PUBLIC_CID,
  );
  await setTx.wait();
  console.log("âœ… Protocol parameters updated");

  // console.log(`ğŸ­ Setting vault factory address to ${FACTORY_ADDRESS}...`);
  // const factoryTx = await config.setVaultFactory(FACTORY_ADDRESS);
  // await factoryTx.wait();
  // console.log("âœ… Vault factory address set");

  const universeList = getUniverseList();

  console.log(`ğŸ­ Setting universe list to ${universeList.length} vaults...`);

  for (const vault of universeList) {
    const isAlreadyWhitelisted = await config.isWhitelisted(vault);
    if (!isAlreadyWhitelisted) {
      console.log(`Adding ${vault} to config whitelist...`);
      const tx = await config.addWhitelistedVault(vault);
      await tx.wait();
      console.log(`âœ… Added ${vault} to config whitelist`);
    } else {
      console.log(`â„¹ï¸  ${vault} is already in config whitelist.`);
    }
  }
}

main().catch((error) => {
  console.error("âŒ Failed to add vaults:", error);
  process.exitCode = 1;
});
